<!DOCTYPE html>

<html lang="en">
    <head>
        <title>VisualTimer</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <style>
            html, body, div {
                width: 95%;
                min-height: 100%;
            }

            div {
                height: 80px;
                width: 80px;
                float: left;
                background-color: green;
                border-radius: 2px;
                margin: 2px;
            }
        </style>

        <!-- Fav and touch icons -->
        <link rel="shortcut icon" href="bootstrap/ico/favicon.ico">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="bootstrap/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="bootstrap/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="bootstrap/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="bootstrap/ico/apple-touch-icon-57-precomposed.png">
    </head>

    <body>
        <!-- BODY -->
        <!-- <div id="test" style="border: 2px solid red"></div> -->
    </body>

    <script type="text/javascript" src="3rd/jquery-1.8.3.js"></script>
    <script type="text/javascript">
        var t;

        'use strict'

        var SECOND = 1000,

            timer = function() {
                var self = {}, running, parent;

                setInterval(function() {
                    console.log(self.isRunning());
                    if (self.isRunning())
                        remove()
                }, SECOND/2)

                add = function (node) {
                    parent.append(node);
                }

                remove = function() {
                    var divs = $('body').find('div'),
                        node = $(divs[divs.length-1]);
                    node.fadeOut(400, function() {node.remove(); } );
                }

                dot = function (i) {
                    return $('<div>')
                            .attr('id', i);
                }

                self.init = function(node) {
                    parent = node ||Â $('body');
                    //add nodes
                    for (var i = 40; i >= 0; i--) {
                        add(
                            dot(i)
                        );
                    };
                    return this;
                }

                self.isRunning = function() {
                    return running;
                }

                self.start = function() {
                    running = true;
                    return this;
                }

                self.pause = function() {
                    running = false;
                    return this;
                }

                self.reset = function() {
                    return self.init(parent);
                }

                return self;
            }

        //onready
        $(document).ready(function() {
            t = timer().init().start();
            //t.pause();
        });

    </script>
</html>